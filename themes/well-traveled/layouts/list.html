{{ define "main" }}
<main class="page__main list">
    <header class="list__header">
        {{ if ne .Kind "taxonomy" }}
            <div class="list__description">Stories about</div>
        {{ end }}
        <h1 class="list__title">{{ .Title }}</h1>
    </header>

    <div class="list__entries">
        {{ $paginator := .Paginate .Data.Pages }}
        {{ if gt (len $paginator.Pages) 0 }}
            {{ range $paginator.Pages }}
            <article class="list__entry entry">
                <h2 class="entry__title">
                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                </h2>
                
                <div class="entry__meta">
                    <time datetime="{{ .Date.Format "2006-01-02" }}">
                        {{ .Date.Format "02 January 2006" }}
                    </time>
                    {{ with .Params.location }} • {{ . }}{{ end }}
                    • {{ .ReadingTime }} min read
                </div>

                <div class="entry__summary text">
                    {{ .Summary | plainify | truncate 200 }}
                    <a href="{{ .Permalink }}" class="entry__more" aria-label="Read more about {{ .Title }}">
                        Read full story &rarr;
                    </a>
                </div>
            </article>
            {{ end }}

            {{ if gt $paginator.TotalPages 1 }}
                {{ partial "pagination.html" . }}
            {{ end }}
            
        {{ else }}
            <div class="list__empty">
                <p>No stories found in this section yet.</p>
                <a href="{{ "/" | relURL }}">Return to homepage</a>
            </div>
        {{ end }}
    </div>
</main>
{{ end }}